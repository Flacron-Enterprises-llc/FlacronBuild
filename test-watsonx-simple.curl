# Quick IBM Watsonx AI test - Replace values and run
# Copy these commands to terminal

API_KEY="your_api_key_here"
PROJECT_ID="your_project_id_here"

# 1. Get token
TOKEN=$(curl -s -X POST "https://iam.cloud.ibm.com/identity/token" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "grant_type=urn:ibm:params:oauth:grant-type:apikey&apikey=${API_KEY}" | grep -o '"access_token":"[^"]*' | cut -d'"' -f4)

# 2. Test WITHOUT project_id
echo "Testing WITHOUT project_id:"
curl -X POST "https://us-south.ml.cloud.ibm.com/ml/v1/text/generation?version=2024-11-19" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${TOKEN}" \
  -d '{"input":"Hello","model_id":"ibm/granite-13b-instruct-v2","parameters":{"max_new_tokens":50}}'

echo -e "\n\n---\n"

# 3. Test WITH project_id
echo "Testing WITH project_id:"
curl -X POST "https://us-south.ml.cloud.ibm.com/ml/v1/text/generation?version=2024-11-19" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${TOKEN}" \
  -d "{\"input\":\"Hello\",\"model_id\":\"ibm/granite-13b-instruct-v2\",\"project_id\":\"${PROJECT_ID}\",\"parameters\":{\"max_new_tokens\":50}}"
